{"version":3,"file":"renderer.js","sourceRoot":"","sources":["../../../../src/frontend/components/renderer.ts"],"names":[],"mappings":";;;;;;;;;OAAO,EAAE,SAAS,EAAE,KAAK,EAAa,QAAQ,EAAE,gBAAgB,EAAgB,MAAM,eAAe;OAC9F,EAAE,wBAAwB,EAAE,MAAM,gCAAgC;AAMzE;IAGE,2BACU,iBAA2C,EAC3C,QAAkB,EAClB,IAAsB;QAFtB,sBAAiB,GAAjB,iBAAiB,CAA0B;QAC3C,aAAQ,GAAR,QAAQ,CAAU;QAClB,SAAI,GAAJ,IAAI,CAAkB;IAC5B,CAAC;IAEG,oCAAQ,GAAhB;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACd,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YACpB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACnB,CAAC;IACH,CAAC;IAEQ,sBAAI,iCAAE;aAAN,UAAO,EAAU;YACxB,IAAI,CAAC,QAAQ,EAAE,CAAC;YAEhB,IAAA,+DAAwF,EAAhF,oBAAO,EAAE,sBAAQ,CAAgE;YACzF,IAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YAElC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,EAAE,CAAC,CAAC;QACzE,CAAC;;;OAAA;IAGD,uCAAW,GAAX;QACE,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAZD;QAAC,KAAK,EAAE;;;+CAAA;IApBV;QAAC,SAAS,CAAC;YACT,QAAQ,EAAE,aAAa;YACvB,QAAQ,EAAE,EAAE;SACb,CAAC;;yBAAA;IA8BF,wBAAC;AAAD,CAAC,AA7BD,IA6BC","sourcesContent":["import { Component, Input, OnDestroy, Injector, ViewContainerRef, ComponentRef } from '@angular/core';\nimport { ExperimentFactoryService } from '../services/experiment-factory';\n\n@Component({\n  selector: 'cl-renderer',\n  template: ''\n})\nexport class RendererComponent implements OnDestroy {\n  private _ref: ComponentRef<any>;\n\n  constructor(\n    private experimentFactory: ExperimentFactoryService,\n    private injector: Injector,\n    private view: ViewContainerRef\n  ) { }\n\n  private _cleanup() {\n    if (this._ref) {\n      this._ref.destroy();\n      this._ref = null;\n    }\n  }\n\n  @Input() set id(id: string) {\n    this._cleanup();\n\n    const { factory, injector } = this.experimentFactory.compileComponent(id, this.injector);\n    const position = this.view.length;\n\n    this._ref = this.view.createComponent(factory, position, injector, []);\n  }\n\n\n  ngOnDestroy() {\n    this._cleanup();\n  }\n}"]}